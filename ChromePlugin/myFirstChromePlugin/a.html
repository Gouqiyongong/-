<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="./jquery.js"></script>
  <style>
    .a  {
      width: 200px;
      /* height: 200px; */
      margin-bottom: 100px;
    }
    .a-l {
      /* float: right; */
      width: 200px;
      /* height: 60px; */
      display: -webkit-box;
      overflow: hidden;
      text-overflow:ellipsis;
      word-break: break-all;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    .right {
      /* float: left; */
      background-color: blue;
    }
  </style>
</head>
<body>
  <div class="a a-l">
    <span class="right">saas</span>ddsasahskjalkjslaj;sj;las;la;s,a222222222222222222;
    <!-- <p class="a-l"></p> -->
  </div>
  <input id="input" onchange="changeCb()" type="file">
  <a href="www.baidu.com" id="aa">aaaaaaaaaaaaaaaaa</a>
  <img src="#" id="img1" alt="" srcset="">
  <img src="#" id="img2" alt="" srcset="">
  <script src="./cs.js"></script>
  <script>
    // // JSON.parse("[1,2,3,]")
    // let fileInput = document.getElementById('input');
    // let img1 = document.getElementById('img1');
    // let img2 = document.getElementById('img2');
    // const canvas = document.createElement("canvas");
    // // fileInput.addEventListener('change', changeCb, false);
    // function changeCb(e) {
    //   console.log(fileInput, fileInput.file, fileInput.files);
    //   let file = fileInput.files[0];
    //   var reader = new FileReader();
    //   reader.readAsDataURL(file);
    //   reader.onload = () => {
    //     let image = new Image();
    //     image.src = reader.result;
    //     image.onload = (e) => {
    //       canvas.width = image.width;
    //       canvas.height = image.height;
    //       let ctx = canvas.getContext('2d');
    //       ctx.drawImage(image, 0, 0, image.width, image.height);
    //       let encoderOptions = 0.1;
    //       let bgBase64Data1 = canvas.toDataURL("image/jpeg", 0.1);
    //       let bgBase64Data2 = canvas.toDataURL("image/jpeg", 0.9);
    //       img1.src = bgBase64Data1
    //       img2.src = bgBase64Data2
    //       console.log('aaaaaaaaaaaaaaa encoderOptions', 0.1, bgBase64Data1.length)
    //       console.log('aaaaaaaaaaaaaaa encoderOptions', 0.9, bgBase64Data2.length)
    //       // ajax(bgBase64Data).then((url) => {
    //       //   let realyUrl = randomPrefix() + url;
    //       //   console.log('realyUrl', realyUrl)
    //       // })
          
    //       // aaaaaaaaaaaaaaa encoderOptions 0.1 580434
    //       // aaaaaaaaaaaaaaa encoderOptions 0.9 580434
    //     }
    //   }
    // }

    // function ajax(imgData) {
    //   let imgstr = imgData.split('base64,')[1]
    //   return new Promise((resolve, reject) => {
    //     let timer = setTimeout(() => {
    //       ajax.abort();
    //       toast('上传超时', true);
    //       reject()
    //     }, 5000)
    //     let ajax = $.ajax({
    //       //请求方式
    //       type : "POST",
    //       //请求的媒体类型
    //       contentType: "application/json;charset=UTF-8",
    //       //请求地址
    //       url : "https://upload.58cdn.com.cn/json",
    //       //数据，json字符串
    //       data : JSON.stringify({
    //         'Pic-Size': '800*0',
    //         'Pic-IsAddWaterPic': true,
    //         'Pic-Cut': '0*0*0*0',
    //         'Pic-Encoding': 'base64',
    //         'Accept-Encoding': 'gzip,deflate',
    //         'Pic-Path': '/zhuanzh/',
    //         'File-Extensions': 'jpg',
    //         'Pic-Data': imgstr
    //       }),
    //       //请求成功
    //       success : function(result) {
    //         timer = null;
    //         resolve(result)
    //       },
    //       //请求失败，包含具体的错误信息
    //       error : function(e){
    //         timer = null;
    //         console.log('e.status', e.status);
    //         console.log('e.responseText', e.responseText);
    //         toast(e.responseText || '图片上传失败', false)
    //       }
    //     });
    //   })
    // }
    // function randomPrefix() {
    //   var prefix = "https://picx.zhuanstatic.com/zhuanzh/";
    //   var random = Math.ceil(Math.random() * 6);
    //   return prefix.replace('x', random);
    // }
  </script>
</body>
</html>